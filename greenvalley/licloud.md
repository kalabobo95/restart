## 新版优化
----------
### 前端部分

- 前后端分离
        
        1. 不会因为一些前端的改动而要重启服务器，只需要把前端的静态文件替换就可以完成更新操作
        2. 有助于代码维护，开发前端的同事只需要专注于前端代码就可以了，不用把整个系统pull下来
        3. 把前端代码分离出来，放在nginx的静态文件夹里，减轻node.js负担，node.js在静态托管这一块性能没有nginx好
        
- 单页面应用

        1. 整个用户体验上会好很多，不需要每切换一个功能就刷新一下界面
        2. 有些功能只有单页面应用可以实现，比如上传较大文件时可不可以切换功能页还是说一定要盯着上传完才能别的操作

- 使用vue、antd开发

        1. vue相对于react和angular比较完出来，站在巨人的肩上，vue集合了angular和react的长处
        2. vue在国内相对比较火，后续如果要扩大开发团队，比较容易招人
        3. antd是蚂蚁金服的组件库，功能比较全、维护的比较好

- 对IE的支持

        之前的licloud不支持ie，新版支持ie11，但是ie10和ie9之前测试是可以的，但是最近加了一些新功能之后，只支持ie11了，这个兼容性还可以调

----------

### 计算节点

- 通讯机制重新实现

        1. 之前使用的通讯框架是kue，已经三年多没人维护，经常出现工程无故不能成功的现象
        2. 现在是通过http相互通讯，用ip限制访问权限     

- 使用python从新开发
        
        每一种语言都有自己比较适合的场景，相对于之前的nodejs，python更适合计算节点的程序
        1. 对于控制exe进程，python功能更加丰富
        2. 对于一些功能比如计算轨迹的长度，python更加适合
        3. 监控系统资源，python也比较合适，将来如果计算节点扩展成多台机，监控系统资源将是一个很重要的需求

- 传输文件方式改变

        之前计算节点对于工程文件的操作都是通过应用节点，这样平白无故的增加了很多传输的时间和带宽的资源损耗。现在下载、上传工程文件计算节点直接自己完成。
----------
### 应用节点

- 将管理接口和用户接口分开

        由于现在的权限机制和扣费机制和之前有很大不同，管理接口和用户接口揉在一起会增加程序的复杂性，不利于后期维护

- 使用pm2-runtime启动程序

        现在是做了个pm2 的docker image，启动的时候用pm2-runtime启动，好处是pm2有一个reload的功能

- 使用mongo数据库

        1. mongo对于json支持的更加好，特别是可以很方便的嵌套
        2. mysql的orm框架用的是sails的waterline，每次改表时很麻烦，要手动改表，要不有时候会出现数据丢失

- 改进上传下载机制
        
        之前的上传和下载都是先把文件放到内存里，然后再存储到对象存储服务器、或者返回给客户端。弊端就是如果文件过大会造成内存不足，现在改成stream的形式

- 大部分接口重新实现

        由于
            1. 数据库改成了mongo，
            2. 权限结构发生了很大变化
            3. 前端获取数据进行了整理，除去一些不必要的数据返回
        所以，应用节点大部分的接口都重新做了调整
